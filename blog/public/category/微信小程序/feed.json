{
    "version": "https://jsonfeed.org/version/1",
    "title": "盧瞳Blog • All posts by \"微信小程序\" category",
    "description": "",
    "home_page_url": "http://blog.1think2program.cn",
    "items": [
        {
            "id": "http://blog.1think2program.cn/2023/07/19/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/",
            "url": "http://blog.1think2program.cn/2023/07/19/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/",
            "title": "微信小程序学习总结",
            "date_published": "2023-07-19T06:39:08.000Z",
            "content_html": "<h2 id=\"官方资源链接\"><a href=\"#官方资源链接\" class=\"headerlink\" title=\"官方资源链接\"></a>官方资源链接</h2><ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2ZyYW1ld29yay9NSU5BLmh0bWw=\">指南</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3JlZmVyZW5jZS8=\">框架</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2NvbXBvbmVudC8=\">组件</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS8=\">API</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L3d4Y2xvdWQvYmFzaXMvZ2V0dGluZy1zdGFydGVkLmh0bWw=\">云开发</span></li>\n</ul>\n<h2 id=\"progect-config-json\"><a href=\"#progect-config-json\" class=\"headerlink\" title=\"progect.config.json\"></a>progect.config.json</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// progect.config.json</span></span><br><span class=\"line\"><span class=\"comment\">// 正式JSON文件中不允许出现注释内容</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;miniprogramRoot&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;miniprogram/&quot;</span><span class=\"punctuation\">,</span>    <span class=\"comment\">// 小程序源码根目录</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;cloudfunctionRoot&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cloudfunctions/&quot;</span><span class=\"punctuation\">,</span>    <span class=\"comment\">// 云函数目录</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;setting&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span>        <span class=\"comment\">// 设置项</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;urlCheck&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;es6&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;enhance&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;postcss&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;preloadBackgroundData&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;minified&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;newFeature&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;coverView&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;nodeModules&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;autoAudits&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;showShadowRootInWxmlPanel&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;scopeDataCheck&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;uglifyFileName&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;checkInvalidKey&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;checkSiteMap&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;uploadWithSourceMap&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;compileHotReLoad&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;lazyloadPlaceholderEnable&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;useMultiFrameRuntime&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;useApiHook&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;useApiHostProcess&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;babelSetting&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;ignore&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;disablePlugins&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;outputPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;enableEngineNative&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;useIsolateContext&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;userConfirmedBundleSwitch&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;packNpmManually&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;packNpmRelationList&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;minifyWXSS&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;disableUseStrict&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;showES6CompileOption&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;useCompilerPlugins&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;minifyWXML&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;condition&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;appid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;小程序appid&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;projectname&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;项目名称&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;libVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;2.14.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;cloudfunctionTemplateRoot&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cloudfunctionTemplate/&quot;</span><span class=\"punctuation\">,</span>        <span class=\"comment\">// 云函数请求示例</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;condition&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;miniprogram&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;list&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;db guide&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;pathName&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;pages/databaseGuide/databaseGuide&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;srcMiniprogramRoot&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;miniprogram/&quot;</span><span class=\"punctuation\">,</span>        <span class=\"comment\">// 貌似是那个小程序打包App的, 没搞清楚</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;compileType&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;miniprogram&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;packOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;ignore&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;include&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;editorSetting&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;tabIndent&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;insertSpaces&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;tabSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;projectArchitecture&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;multiPlatform&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;simulatorPluginLibVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;wxext14566970e7e9f62&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;2.27.3&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"app-js\"><a href=\"#app-js\" class=\"headerlink\" title=\"app.js\"></a>app.js</h2><h3 id=\"基本介绍\"><a href=\"#基本介绍\" class=\"headerlink\" title=\"基本介绍\"></a>基本介绍</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"title class_\">App</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">onLaunch</span>:<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  云开发环境sdk配置</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!wx.<span class=\"property\">cloud</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;请使用 2.2.3 或以上的基础库以使用云能力&#x27;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      wx.<span class=\"property\">cloud</span>.<span class=\"title function_\">init</span>(&#123;</span><br><span class=\"line\">        <span class=\"comment\">// env 参数说明：</span></span><br><span class=\"line\">        <span class=\"comment\">//   env 参数决定接下来小程序发起的云开发调用（wx.cloud.xxx）会默认请求到哪个云环境的资源</span></span><br><span class=\"line\">        <span class=\"comment\">//   此处请填入环境 ID, 环境 ID 可打开云控制台查看</span></span><br><span class=\"line\">        <span class=\"comment\">//   如不填则使用默认环境（第一个创建的环境）</span></span><br><span class=\"line\">        <span class=\"attr\">env</span>: <span class=\"string\">&#x27;环境ID&#x27;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// traceUser: true,</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//  全局变量配置</span></span><br><span class=\"line\">      <span class=\"comment\">//  其他位置访问 getApp().globalData</span></span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">globalData</span> = &#123;</span><br><span class=\"line\">          <span class=\"attr\">userData</span>: <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//  全局方法</span></span><br><span class=\"line\">    <span class=\"comment\">//  getApp().updataUserNovelList()</span></span><br><span class=\"line\">    <span class=\"title function_\">updataUserNovelList</span>(<span class=\"params\"></span>)&#123;&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"全局加载数据完毕后通知第一页更新UI数据\"><a href=\"#全局加载数据完毕后通知第一页更新UI数据\" class=\"headerlink\" title=\"全局加载数据完毕后通知第一页更新UI数据\"></a>全局加载数据完毕后通知第一页更新UI数据</h3><blockquote>\n<p>首页index的onload函数中为app注册回调事假,  之后app的全局onLaunch事件中进行请求, 异步请求完毕后调用回调事件更新界面</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  index.js</span></span><br><span class=\"line\"><span class=\"title function_\">onLoad</span>(<span class=\"params\">options</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> self = <span class=\"variable language_\">this</span></span><br><span class=\"line\">      <span class=\"comment\">// 注册回调, 等后端传回用户数据后更新页面</span></span><br><span class=\"line\">      <span class=\"title function_\">getApp</span>().<span class=\"property\">userInitCallBack</span>=<span class=\"keyword\">function</span>(<span class=\"params\">userData</span>)&#123;</span><br><span class=\"line\">        self.<span class=\"title function_\">setData</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">nickname</span>: userData.<span class=\"property\">nickName</span>,</span><br><span class=\"line\">          <span class=\"attr\">avatarUrl</span>: userData.<span class=\"property\">avatarUrl</span>,</span><br><span class=\"line\">          <span class=\"attr\">novel_list</span>: userData.<span class=\"property\">novel_list</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">info</span>(<span class=\"string\">&quot;index 数据初始化完毕&quot;</span>, self.<span class=\"property\">data</span>)</span><br><span class=\"line\">        <span class=\"comment\">// console.log(&quot;self.data.nickname:&quot;,self.data)</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (app.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span> !== <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;当前用户信息变更为: &quot;</span>,app.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span>)</span><br><span class=\"line\">        <span class=\"keyword\">let</span> userData = app.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span></span><br><span class=\"line\">        self.<span class=\"title function_\">setData</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">nickname</span>: userData.<span class=\"property\">nickName</span>,</span><br><span class=\"line\">          <span class=\"attr\">avatarUrl</span>: userData.<span class=\"property\">avatarUrl</span>,</span><br><span class=\"line\">          <span class=\"attr\">novel_list</span>: userData.<span class=\"property\">novel_list</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  app.js</span></span><br><span class=\"line\">wx.<span class=\"property\">cloud</span>.<span class=\"title function_\">callFunction</span>(&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 云函数名称</span></span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&#x27;user&#x27;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 传给云函数的参数</span></span><br><span class=\"line\">        <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">type</span>: <span class=\"string\">&quot;queryUser&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">success</span>:<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>&#123;</span><br><span class=\"line\">          <span class=\"comment\">// console.log(&quot;拿到的数据&quot;, res.result)</span></span><br><span class=\"line\">          <span class=\"comment\">// 莫名其妙会变成数组, 干脆这里判断一下</span></span><br><span class=\"line\">          <span class=\"keyword\">if</span>(res.<span class=\"property\">result</span> <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Array</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span> = res.<span class=\"property\">result</span>[<span class=\"number\">0</span>]</span><br><span class=\"line\">          &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span> = res.<span class=\"property\">result</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          </span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">info</span>(<span class=\"string\">&quot;后端数据加载完毕&quot;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span>)</span><br><span class=\"line\">          <span class=\"variable language_\">this</span>.<span class=\"title function_\">userInitCallBack</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span>);</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">info</span>(<span class=\"string\">&quot;用户身份初始化完毕&quot;</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">globalData</span>.<span class=\"property\">userData</span>)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">fail</span>: <span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">error</span>(err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"事件绑定\"><a href=\"#事件绑定\" class=\"headerlink\" title=\"事件绑定\"></a>事件绑定</h2><blockquote>\n<p>捕获方式 : 事件名</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- bind:tap --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;result&quot;</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">&quot;&#123;&#123;!searching&#125;&#125;&quot;</span> <span class=\"attr\">bind:tap</span>=<span class=\"string\">&quot;onSearchDetail&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"wx-if-vs-hidden\"><a href=\"#wx-if-vs-hidden\" class=\"headerlink\" title=\"wx:if vs hidden\"></a>wx:if vs hidden</h2><h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">&quot;&#123;&#123;a&gt;5&#125;&#125;&quot;</span>&gt;</span>6<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:elif</span>=<span class=\"string\">&quot;&#123;&#123;a &lt; 5&#125;&#125;&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:else</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"性能对比\"><a href=\"#性能对比\" class=\"headerlink\" title=\"性能对比\"></a>性能对比</h3><p>wx:if 也是惰性的，如果在初始渲染条件为 false，框架什么也不做，在条件第一次变成真的时候才开始局部渲染。</p>\n<p>hidden 就简单的多，组件始终会被渲染，只是简单的控制显示与隐藏<br>性能分析：wx:if 有更高的切换消耗而 hidden 有更高的初始渲染消耗。</p>\n<p>因此，如果需要频繁切换的情景下，用 hidden 更好，如果在运行时条件不大可能改变则 wx:if 较好</p>\n<h2 id=\"组件使用\"><a href=\"#组件使用\" class=\"headerlink\" title=\"组件使用\"></a>组件使用</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;usingComponents&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span> <span class=\"comment\">// 使用字段</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"wxss\"><a href=\"#wxss\" class=\"headerlink\" title=\"wxss\"></a>wxss</h2><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*自定义状态栏等透明问题*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.status-bar</span>, <span class=\"selector-class\">.status-bar-placeholder</span>, <span class=\"selector-class\">.navigation-bar</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"comment\">/* border-bottom: 1rpx #000 solid; */</span></span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">20000</span>;  <span class=\"comment\">/*不加这个会透明*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*水平排列元素*/</span></span><br><span class=\"line\"><span class=\"comment\">/*给他父元素 设置display: flex; justify-content:left;*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.menu-button</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">298</span>rpx;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span><span class=\"selector-pseudo\">:left</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-left</span>: <span class=\"number\">40</span>rpx;</span><br><span class=\"line\">  <span class=\"attribute\">padding-right</span>: <span class=\"number\">40</span>rpx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*小程序默认页面的背景颜色*/</span></span><br><span class=\"line\"><span class=\"attribute\">background-color</span>: <span class=\"number\">#f6f6f6</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*文字水平居中*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> <span class=\"selector-class\">.sort</span>, <span class=\"selector-class\">.content</span> <span class=\"selector-class\">.last-update</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*文字垂直居中*/</span></span><br><span class=\"line\"><span class=\"comment\">/*文字行高和容器高相同*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> <span class=\"selector-class\">.sort</span>, <span class=\"selector-class\">.content</span> <span class=\"selector-class\">.last-update</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx</span><br><span class=\"line\">  line-height: <span class=\"number\">100</span>rpx;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        }
    ]
}